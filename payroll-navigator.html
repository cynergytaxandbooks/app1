<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payroll Process Guide</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Custom scrollbar for sidebar */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-slate-50 font-sans text-slate-800 h-screen flex flex-col overflow-hidden">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 p-6 flex items-center justify-between shadow-sm flex-shrink-0 z-10">
        <div>
            <h1 class="text-2xl font-bold text-slate-900 flex items-center gap-2">
                <i data-lucide="dollar-sign" class="text-green-600"></i> Payroll Process Guide
            </h1>
            <p class="text-slate-500 text-sm mt-1">A step-by-step workflow for compliance and execution</p>
        </div>
        <div class="hidden md:flex text-xs font-medium text-slate-400 bg-slate-100 px-3 py-1 rounded-full">
            Reference: 2025 Guidelines
        </div>
    </header>

    <!-- Main Content Area -->
    <div class="flex flex-1 overflow-hidden">
        
        <!-- Sidebar Navigation (Desktop) -->
        <nav class="w-80 bg-white border-r border-slate-200 overflow-y-auto hidden md:block flex-shrink-0">
            <div class="p-4 space-y-2" id="sidebar-nav">
                <!-- Sidebar items injected by JS -->
            </div>
        </nav>

        <!-- Main Layout Wrapper -->
        <div class="flex flex-col flex-1 min-w-0">
            
            <!-- Mobile Nav Header (Horizontal Scroll) -->
            <div class="md:hidden flex overflow-x-auto p-2 bg-white border-b space-x-2 flex-shrink-0 scrollbar-hide" id="mobile-nav">
                <!-- Mobile items injected by JS -->
            </div>

            <!-- Content Panel -->
            <main class="flex-1 overflow-y-auto p-4 md:p-8 bg-slate-50" id="main-scroll">
                <div class="max-w-3xl mx-auto space-y-6" id="content-area">
                    <!-- Dynamic Content injected by JS -->
                </div>
            </main>
        </div>
    </div>

    <script>
        // --- Data Structure (Matching React Source) ---
        const phases = [
            {
                id: 0,
                title: "Registration & Setup",
                subtitle: "Establish Legal Identity",
                icon: "building-2",
                color: "bg-blue-500",
                textColor: "text-blue-500",
                borderColor: "border-blue-500",
                ringColor: "ring-blue-500",
                content: [
                    {
                        heading: "1. Federal EIN",
                        details: "Obtain your 9-digit Employer Identification Number (00-0000000) from the IRS.",
                        subtext: "Apply online for immediate issuance. Must be your own EIN (not a predecessor's).",
                        actionItem: "Apply via IRS Website or Form SS-4"
                    },
                    {
                        heading: "2. State & Local Registration",
                        details: "Register in every state where employees reside.",
                        points: [
                            "State Income Tax (SIT): For withholding state taxes.",
                            "State Unemployment (SUI): Register with labor dept (e.g., TWC, EDD). Strict timelines apply.",
                            "Local Taxes: City/County specific registrations."
                        ]
                    },
                    {
                        heading: "3. Choose Payroll System",
                        details: "Select how you will process payments.",
                        points: [
                            "PSP (Payroll Service Provider): Processes payments, you retain liability.",
                            "PEO (Professional Employer Org): Co-employer, shares liability.",
                            "Software: Automates calculations/filings, integrates with internal systems."
                        ]
                    }
                ]
            },
            {
                id: 1,
                title: "Employee Onboarding",
                subtitle: "Data Collection",
                icon: "users",
                color: "bg-indigo-500",
                textColor: "text-indigo-500",
                borderColor: "border-indigo-500",
                ringColor: "ring-indigo-500",
                content: [
                    {
                        heading: "1. Verify Eligibility (I-9)",
                        details: "Confirm legal right to work in the U.S.",
                        subtext: "Review acceptable docs (Passport, Driver's License + SS Card, etc.).",
                        actionItem: "Complete USCIS Form I-9"
                    },
                    {
                        heading: "2. Tax Withholding (W-4)",
                        details: "Determine tax withholding amounts.",
                        points: [
                            "Federal: IRS Form W-4. Default to 'Single' if not furnished.",
                            "State: Specific forms (e.g., G-4 for GA, HW-4 for HI)."
                        ]
                    },
                    {
                        heading: "3. Essential Data",
                        details: "Record exact Name and SSN.",
                        subtext: "Warning: Do NOT accept ITINs (starting with '9') for employment.",
                        critical: true
                    }
                ]
            },
            {
                id: 2,
                title: "Running Payroll",
                subtitle: "Calculation Order",
                icon: "calculator",
                color: "bg-purple-500",
                textColor: "text-purple-500",
                borderColor: "border-purple-500",
                ringColor: "ring-purple-500",
                content: [
                    {
                        heading: "Step 1: Gross Pay",
                        details: "Hourly Rate × Hours OR Salary ÷ Pay Periods",
                        type: "calculation"
                    },
                    {
                        heading: "Step 2: Pre-Tax Deductions",
                        details: "Subtract 401(k), Health Insurance, etc.",
                        subtext: "Lowers taxable wage base.",
                        type: "calculation"
                    },
                    {
                        heading: "Step 3: Calculate Taxes",
                        details: "Apply rates to taxable wages:",
                        points: [
                            "Fed Income Tax: Based on W-4 & Tables",
                            "Social Security: 6.2% (Limit: $176,100 for 2025)",
                            "Medicare: 1.45% (No limit)",
                            "Addtl. Medicare: 0.9% (Over $200k)",
                            "State/Local: Varies (e.g., CA SDI 1.2%)"
                        ],
                        type: "calculation"
                    },
                    {
                        heading: "Step 4: Post-Tax Deductions",
                        details: "Subtract Garnishments (Child Support, etc.)",
                        subtext: "Limits apply (e.g., 25% of disposable earnings).",
                        type: "calculation"
                    },
                    {
                        heading: "Step 5: Net Pay",
                        details: "Issue Final Payment via Check or Direct Deposit",
                        type: "result"
                    }
                ]
            },
            {
                id: 3,
                title: "Depositing Taxes",
                subtitle: "Federal Remittance",
                icon: "landmark",
                color: "bg-emerald-600",
                textColor: "text-emerald-600",
                borderColor: "border-emerald-600",
                ringColor: "ring-emerald-600",
                content: [
                    {
                        heading: "Determine Schedule",
                        details: "Based on 'Lookback Period' (Previous 4 quarters ending June 30).",
                        points: [
                            "Monthly Depositor: Liability ≤ $50k. Due 15th of next month.",
                            "Semiweekly Depositor: Liability > $50k. Due Wed or Fri based on payday."
                        ]
                    },
                    {
                        heading: "The $100k Rule",
                        details: "Accumulate $100k+ in a single day?",
                        subtext: "Must deposit by the NEXT business day.",
                        critical: true
                    },
                    {
                        heading: "FUTA Deposits",
                        details: "Employer-only tax (6% on first $7k).",
                        subtext: "Deposit quarterly if liability > $500."
                    }
                ]
            },
            {
                id: 4,
                title: "Filing Returns",
                subtitle: "Quarterly & Annual",
                icon: "file-text",
                color: "bg-orange-500",
                textColor: "text-orange-500",
                borderColor: "border-orange-500",
                ringColor: "ring-orange-500",
                content: [
                    {
                        heading: "Quarterly Filings",
                        points: [
                            "Form 941: Wages & Federal Taxes. Due end of month after quarter.",
                            "State Returns: Wage reports & Unemployment tax (e.g., DE 9)."
                        ]
                    },
                    {
                        heading: "Annual Filings",
                        points: [
                            "Form 940: Annual FUTA liability. Due Jan 31.",
                            "W-2 / W-3: Employee wage statements & SSA transmittal. Due Jan 31."
                        ]
                    }
                ]
            }
        ];

        // --- State Management ---
        let activePhase = 0;

        // --- Rendering Logic ---
        function renderApp() {
            renderSidebar();
            renderMobileNav();
            renderContent();
            lucide.createIcons(); // Re-initialize icons
        }

        function setActivePhase(index) {
            if (index < 0 || index >= phases.length) return;
            activePhase = index;
            renderApp();
            // Scroll content to top
            document.getElementById('main-scroll').scrollTop = 0;
        }

        function renderSidebar() {
            const sidebar = document.getElementById('sidebar-nav');
            sidebar.innerHTML = phases.map((phase, index) => {
                const isActive = activePhase === index;
                const activeClasses = isActive 
                    ? `border-${phase.color.replace('bg-', '')} ring-1 ring-${phase.color.replace('bg-', '')} bg-slate-50` 
                    : 'border-transparent hover:bg-slate-50';
                
                const textColor = isActive ? 'text-slate-900' : 'text-slate-600';

                return `
                    <button
                        onclick="setActivePhase(${index})"
                        class="w-full text-left p-4 rounded-xl transition-all duration-200 flex items-center gap-3 border ${activeClasses}"
                    >
                        <div class="p-2 rounded-lg text-white shadow-sm ${phase.color}">
                            <i data-lucide="${phase.icon}" class="w-5 h-5"></i>
                        </div>
                        <div class="flex-1">
                            <div class="font-bold text-sm ${textColor}">
                                Phase ${index + 1}
                            </div>
                            <div class="text-xs text-slate-500">${phase.title}</div>
                        </div>
                        ${isActive ? '<i data-lucide="chevron-right" class="ml-auto w-4 h-4 text-slate-400"></i>' : ''}
                    </button>
                `;
            }).join('');
        }

        function renderMobileNav() {
            const nav = document.getElementById('mobile-nav');
            nav.innerHTML = phases.map((phase, index) => {
                const isActive = activePhase === index;
                const classes = isActive 
                    ? 'bg-slate-100 font-bold text-slate-900' 
                    : 'text-slate-500';
                return `
                    <button
                        onclick="setActivePhase(${index})"
                        class="flex-shrink-0 p-2 rounded-lg text-sm transition-colors ${classes}"
                    >
                        Phase ${index + 1}
                    </button>
                `;
            }).join('');
        }

        function renderContent() {
            const container = document.getElementById('content-area');
            const data = phases[activePhase];

            // Header Card HTML
            const headerHtml = `
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <div class="flex items-center gap-4 mb-2">
                        <div class="p-3 rounded-xl text-white shadow-md ${data.color}">
                            <i data-lucide="${data.icon}" class="w-8 h-8"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-slate-900">${data.title}</h2>
                            <p class="text-slate-500">${data.subtitle}</p>
                        </div>
                    </div>
                </div>
            `;

            // Content Items HTML
            const itemsHtml = data.content.map((item, idx) => {
                const isResult = item.type === 'result';
                const containerClasses = isResult 
                    ? 'bg-green-50 border-green-100 ring-1 ring-green-200' 
                    : 'bg-white border-slate-100';
                
                // Icon for the number bubble or warning
                const iconHtml = item.critical 
                    ? `<i data-lucide="info" class="w-5 h-5 text-red-500"></i>` 
                    : `<div class="w-5 h-5 rounded-full bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold">${idx + 1}</div>`;

                // Points List
                const pointsHtml = item.points ? `
                    <ul class="space-y-2 mb-3">
                        ${item.points.map(pt => `
                            <li class="flex items-start gap-2 text-sm text-slate-600 bg-slate-50 p-2 rounded-lg">
                                <i data-lucide="check-circle-2" class="w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"></i>
                                <span>${pt}</span>
                            </li>
                        `).join('')}
                    </ul>
                ` : '';

                // Subtext Alert
                const subtextHtml = item.subtext ? `
                    <div class="text-sm mt-3 p-3 rounded-lg flex gap-2 ${item.critical ? 'bg-red-50 text-red-700' : 'bg-blue-50 text-blue-700'}">
                        <i data-lucide="info" class="w-4 h-4 mt-0.5 flex-shrink-0"></i>
                        <span>${item.subtext}</span>
                    </div>
                ` : '';

                // Action Item Badge
                const actionHtml = item.actionItem ? `
                    <div class="mt-4 inline-flex items-center gap-2 text-xs font-bold uppercase tracking-wider text-slate-400 border border-slate-200 px-3 py-1 rounded-full">
                        <i data-lucide="calendar-clock" class="w-3 h-3"></i>
                        Action: ${item.actionItem}
                    </div>
                ` : '';

                return `
                    <div class="rounded-xl p-6 shadow-sm border transition-all duration-300 hover:shadow-md ${containerClasses}">
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0 mt-1">
                                ${iconHtml}
                            </div>
                            <div class="flex-1">
                                <h3 class="font-bold text-slate-800 text-lg mb-1">${item.heading}</h3>
                                <p class="text-slate-600 mb-3 leading-relaxed">${item.details}</p>
                                ${pointsHtml}
                                ${subtextHtml}
                                ${actionHtml}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // Footer Navigation Buttons
            const isFirst = activePhase === 0;
            const isLast = activePhase === phases.length - 1;
            
            const prevBtnClass = isFirst 
                ? 'text-slate-300 cursor-not-allowed' 
                : 'text-slate-600 hover:bg-white hover:shadow-sm cursor-pointer';
            
            const nextBtnClass = isLast
                ? 'text-slate-300 cursor-not-allowed'
                : 'bg-slate-900 text-white hover:bg-slate-800 shadow-md cursor-pointer';

            const footerHtml = `
                <div class="flex justify-between pt-8 pb-12">
                    <button 
                        onclick="setActivePhase(${activePhase - 1})" 
                        disabled="${isFirst}"
                        class="px-6 py-2 rounded-lg font-medium transition-colors ${prevBtnClass}"
                    >
                        Previous Phase
                    </button>
                    <button 
                        onclick="setActivePhase(${activePhase + 1})"
                        disabled="${isLast}"
                        class="px-6 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${nextBtnClass}"
                    >
                        Next Phase <i data-lucide="arrow-right" class="w-4 h-4"></i>
                    </button>
                </div>
            `;

            container.innerHTML = headerHtml + `<div class="space-y-4">` + itemsHtml + `</div>` + footerHtml;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderApp();
        });

    </script>
</body>
</html>